// ==============================================================
// RTL generated by Vitis HLS - High-Level Synthesis from C, C++ and OpenCL
// Version: 2020.1.1
// Copyright (C) 1986-2020 Xilinx, Inc. All Rights Reserved.
// 
// ===========================================================

`timescale 1 ns / 1 ps 

module pyr_dense_optical_flow_accel_densePyrOpticalFlow_5_50_11_16_10_0_1080_1920_1_false_s (
        ap_clk,
        ap_rst,
        ap_start,
        ap_done,
        ap_continue,
        ap_idle,
        ap_ready,
        current_img_mat_data_dout,
        current_img_mat_data_empty_n,
        current_img_mat_data_read,
        next_img_mat_data_dout,
        next_img_mat_data_empty_n,
        next_img_mat_data_read,
        streamFlowin_mat_data_dout,
        streamFlowin_mat_data_empty_n,
        streamFlowin_mat_data_read,
        streamFlowout_mat_data_din,
        streamFlowout_mat_data_full_n,
        streamFlowout_mat_data_write,
        current_img_mat_rows_dout,
        current_img_mat_rows_empty_n,
        current_img_mat_rows_read,
        current_img_mat_cols_dout,
        current_img_mat_cols_empty_n,
        current_img_mat_cols_read,
        streamFlowin_mat_rows_dout,
        streamFlowin_mat_rows_empty_n,
        streamFlowin_mat_rows_read,
        streamFlowin_mat_cols_dout,
        streamFlowin_mat_cols_empty_n,
        streamFlowin_mat_cols_read,
        level_dout,
        level_empty_n,
        level_read,
        scale_up_flag_dout,
        scale_up_flag_empty_n,
        scale_up_flag_read,
        scale_in_dout,
        scale_in_empty_n,
        scale_in_read,
        init_flag_dout,
        init_flag_empty_n,
        init_flag_read
);

parameter    ap_ST_fsm_state1 = 2'd1;
parameter    ap_ST_fsm_state2 = 2'd2;

input   ap_clk;
input   ap_rst;
input   ap_start;
output   ap_done;
input   ap_continue;
output   ap_idle;
output   ap_ready;
input  [7:0] current_img_mat_data_dout;
input   current_img_mat_data_empty_n;
output   current_img_mat_data_read;
input  [7:0] next_img_mat_data_dout;
input   next_img_mat_data_empty_n;
output   next_img_mat_data_read;
input  [31:0] streamFlowin_mat_data_dout;
input   streamFlowin_mat_data_empty_n;
output   streamFlowin_mat_data_read;
output  [31:0] streamFlowout_mat_data_din;
input   streamFlowout_mat_data_full_n;
output   streamFlowout_mat_data_write;
input  [31:0] current_img_mat_rows_dout;
input   current_img_mat_rows_empty_n;
output   current_img_mat_rows_read;
input  [31:0] current_img_mat_cols_dout;
input   current_img_mat_cols_empty_n;
output   current_img_mat_cols_read;
input  [31:0] streamFlowin_mat_rows_dout;
input   streamFlowin_mat_rows_empty_n;
output   streamFlowin_mat_rows_read;
input  [31:0] streamFlowin_mat_cols_dout;
input   streamFlowin_mat_cols_empty_n;
output   streamFlowin_mat_cols_read;
input  [31:0] level_dout;
input   level_empty_n;
output   level_read;
input  [31:0] scale_up_flag_dout;
input   scale_up_flag_empty_n;
output   scale_up_flag_read;
input  [31:0] scale_in_dout;
input   scale_in_empty_n;
output   scale_in_read;
input  [31:0] init_flag_dout;
input   init_flag_empty_n;
output   init_flag_read;

reg ap_done;
reg ap_idle;
reg ap_ready;
reg current_img_mat_data_read;
reg next_img_mat_data_read;
reg streamFlowin_mat_data_read;
reg streamFlowout_mat_data_write;
reg current_img_mat_rows_read;
reg current_img_mat_cols_read;
reg streamFlowin_mat_rows_read;
reg streamFlowin_mat_cols_read;
reg level_read;
reg scale_up_flag_read;
reg scale_in_read;
reg init_flag_read;

reg    ap_done_reg;
(* fsm_encoding = "none" *) reg   [1:0] ap_CS_fsm;
wire    ap_CS_fsm_state1;
reg    current_img_mat_rows_blk_n;
reg    current_img_mat_cols_blk_n;
reg    streamFlowin_mat_rows_blk_n;
reg    streamFlowin_mat_cols_blk_n;
reg    level_blk_n;
reg    scale_up_flag_blk_n;
reg    scale_in_blk_n;
reg    init_flag_blk_n;
reg   [31:0] level_read_reg_140;
reg    ap_block_state1;
reg   [31:0] scale_in_read_reg_145;
wire   [0:0] trunc_ln304_fu_128_p1;
reg   [0:0] trunc_ln304_reg_150;
reg   [31:0] current_img_mat_rows_read_reg_155;
reg   [31:0] current_img_mat_cols_read_reg_160;
reg   [31:0] streamFlowin_mat_rows_read_reg_165;
reg   [31:0] streamFlowin_mat_cols_read_reg_170;
wire   [0:0] icmp_ln51_fu_133_p2;
reg   [0:0] icmp_ln51_reg_175;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_current_img_mat_434_read;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_next_img_mat_435_read;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowin_mat_436_read;
wire   [31:0] grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_din;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_write;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready;
wire    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_idle;
reg    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_continue;
reg    grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg;
reg    ap_block_state1_ignore_call27;
wire    ap_CS_fsm_state2;
wire    ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready;
wire    ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done;
reg    ap_block_state2_on_subcall_done;
reg    ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready;
reg    ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done;
wire   [7:0] trunc_ln100_fu_124_p1;
reg   [1:0] ap_NS_fsm;

// power-on initialization
initial begin
#0 ap_done_reg = 1'b0;
#0 ap_CS_fsm = 2'd1;
#0 grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg = 1'b0;
#0 ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready = 1'b0;
#0 ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done = 1'b0;
end

pyr_dense_optical_flow_accel_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98(
    .current_img_mat_434_dout(current_img_mat_data_dout),
    .current_img_mat_434_empty_n(current_img_mat_data_empty_n),
    .current_img_mat_434_read(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_current_img_mat_434_read),
    .next_img_mat_435_dout(next_img_mat_data_dout),
    .next_img_mat_435_empty_n(next_img_mat_data_empty_n),
    .next_img_mat_435_read(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_next_img_mat_435_read),
    .streamFlowin_mat_436_dout(streamFlowin_mat_data_dout),
    .streamFlowin_mat_436_empty_n(streamFlowin_mat_data_empty_n),
    .streamFlowin_mat_436_read(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowin_mat_436_read),
    .streamFlowout_mat_437_din(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_din),
    .streamFlowout_mat_437_full_n(streamFlowout_mat_data_full_n),
    .streamFlowout_mat_437_write(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_write),
    .rows(current_img_mat_rows_read_reg_155),
    .cols(current_img_mat_cols_read_reg_160),
    .prev_rows(streamFlowin_mat_rows_read_reg_165),
    .prev_cols(streamFlowin_mat_cols_read_reg_170),
    .level(level_read_reg_140),
    .scale_up_flag(icmp_ln51_reg_175),
    .scale_in(scale_in_read_reg_145),
    .init_flag(trunc_ln304_reg_150),
    .ap_clk(ap_clk),
    .ap_rst(ap_rst),
    .prev_rows_ap_vld(1'b1),
    .prev_cols_ap_vld(1'b1),
    .rows_ap_vld(1'b1),
    .cols_ap_vld(1'b1),
    .level_ap_vld(1'b1),
    .scale_up_flag_ap_vld(1'b1),
    .scale_in_ap_vld(1'b1),
    .init_flag_ap_vld(1'b1),
    .ap_start(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start),
    .ap_done(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done),
    .ap_ready(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready),
    .ap_idle(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_idle),
    .ap_continue(grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_continue)
);

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_CS_fsm <= ap_ST_fsm_state1;
    end else begin
        ap_CS_fsm <= ap_NS_fsm;
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_done_reg <= 1'b0;
    end else begin
        if ((ap_continue == 1'b1)) begin
            ap_done_reg <= 1'b0;
        end else if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
            ap_done_reg <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done <= 1'b0;
    end else begin
        if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
            ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done <= 1'b0;
        end else if ((grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done == 1'b1)) begin
            ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready <= 1'b0;
    end else begin
        if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
            ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready <= 1'b0;
        end else if ((grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready == 1'b1)) begin
            ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg <= 1'b0;
    end else begin
        if ((((1'b1 == ap_CS_fsm_state2) & (ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready == 1'b0)) | (~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1)))) begin
            grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg <= 1'b1;
        end else if ((grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready == 1'b1)) begin
            grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg <= 1'b0;
        end
    end
end

always @ (posedge ap_clk) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        current_img_mat_cols_read_reg_160 <= current_img_mat_cols_dout;
        current_img_mat_rows_read_reg_155 <= current_img_mat_rows_dout;
        icmp_ln51_reg_175 <= icmp_ln51_fu_133_p2;
        level_read_reg_140 <= level_dout;
        scale_in_read_reg_145 <= scale_in_dout;
        streamFlowin_mat_cols_read_reg_170 <= streamFlowin_mat_cols_dout;
        streamFlowin_mat_rows_read_reg_165 <= streamFlowin_mat_rows_dout;
        trunc_ln304_reg_150 <= trunc_ln304_fu_128_p1;
    end
end

always @ (*) begin
    if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
        ap_done = 1'b1;
    end else begin
        ap_done = ap_done_reg;
    end
end

always @ (*) begin
    if (((ap_start == 1'b0) & (1'b1 == ap_CS_fsm_state1))) begin
        ap_idle = 1'b1;
    end else begin
        ap_idle = 1'b0;
    end
end

always @ (*) begin
    if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
        ap_ready = 1'b1;
    end else begin
        ap_ready = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        current_img_mat_cols_blk_n = current_img_mat_cols_empty_n;
    end else begin
        current_img_mat_cols_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        current_img_mat_cols_read = 1'b1;
    end else begin
        current_img_mat_cols_read = 1'b0;
    end
end

always @ (*) begin
    if ((1'b1 == ap_CS_fsm_state2)) begin
        current_img_mat_data_read = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_current_img_mat_434_read;
    end else begin
        current_img_mat_data_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        current_img_mat_rows_blk_n = current_img_mat_rows_empty_n;
    end else begin
        current_img_mat_rows_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        current_img_mat_rows_read = 1'b1;
    end else begin
        current_img_mat_rows_read = 1'b0;
    end
end

always @ (*) begin
    if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
        grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_continue = 1'b1;
    end else begin
        grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_continue = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        init_flag_blk_n = init_flag_empty_n;
    end else begin
        init_flag_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        init_flag_read = 1'b1;
    end else begin
        init_flag_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        level_blk_n = level_empty_n;
    end else begin
        level_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        level_read = 1'b1;
    end else begin
        level_read = 1'b0;
    end
end

always @ (*) begin
    if ((1'b1 == ap_CS_fsm_state2)) begin
        next_img_mat_data_read = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_next_img_mat_435_read;
    end else begin
        next_img_mat_data_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        scale_in_blk_n = scale_in_empty_n;
    end else begin
        scale_in_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        scale_in_read = 1'b1;
    end else begin
        scale_in_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        scale_up_flag_blk_n = scale_up_flag_empty_n;
    end else begin
        scale_up_flag_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        scale_up_flag_read = 1'b1;
    end else begin
        scale_up_flag_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        streamFlowin_mat_cols_blk_n = streamFlowin_mat_cols_empty_n;
    end else begin
        streamFlowin_mat_cols_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        streamFlowin_mat_cols_read = 1'b1;
    end else begin
        streamFlowin_mat_cols_read = 1'b0;
    end
end

always @ (*) begin
    if ((1'b1 == ap_CS_fsm_state2)) begin
        streamFlowin_mat_data_read = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowin_mat_436_read;
    end else begin
        streamFlowin_mat_data_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        streamFlowin_mat_rows_blk_n = streamFlowin_mat_rows_empty_n;
    end else begin
        streamFlowin_mat_rows_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        streamFlowin_mat_rows_read = 1'b1;
    end else begin
        streamFlowin_mat_rows_read = 1'b0;
    end
end

always @ (*) begin
    if ((1'b1 == ap_CS_fsm_state2)) begin
        streamFlowout_mat_data_write = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_write;
    end else begin
        streamFlowout_mat_data_write = 1'b0;
    end
end

always @ (*) begin
    case (ap_CS_fsm)
        ap_ST_fsm_state1 : begin
            if ((~((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
                ap_NS_fsm = ap_ST_fsm_state2;
            end else begin
                ap_NS_fsm = ap_ST_fsm_state1;
            end
        end
        ap_ST_fsm_state2 : begin
            if (((1'b1 == ap_CS_fsm_state2) & (1'b0 == ap_block_state2_on_subcall_done))) begin
                ap_NS_fsm = ap_ST_fsm_state1;
            end else begin
                ap_NS_fsm = ap_ST_fsm_state2;
            end
        end
        default : begin
            ap_NS_fsm = 'bx;
        end
    endcase
end

assign ap_CS_fsm_state1 = ap_CS_fsm[32'd0];

assign ap_CS_fsm_state2 = ap_CS_fsm[32'd1];

always @ (*) begin
    ap_block_state1 = ((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1));
end

always @ (*) begin
    ap_block_state1_ignore_call27 = ((ap_start == 1'b0) | (init_flag_empty_n == 1'b0) | (scale_in_empty_n == 1'b0) | (scale_up_flag_empty_n == 1'b0) | (level_empty_n == 1'b0) | (streamFlowin_mat_cols_empty_n == 1'b0) | (streamFlowin_mat_rows_empty_n == 1'b0) | (current_img_mat_cols_empty_n == 1'b0) | (current_img_mat_rows_empty_n == 1'b0) | (ap_done_reg == 1'b1));
end

always @ (*) begin
    ap_block_state2_on_subcall_done = ((ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready & ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done) == 1'b0);
end

assign ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done = (grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done | ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_done);

assign ap_sync_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready = (grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready | ap_sync_reg_grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_ready);

assign grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_ap_start_reg;

assign icmp_ln51_fu_133_p2 = ((trunc_ln100_fu_124_p1 != 8'd0) ? 1'b1 : 1'b0);

assign streamFlowout_mat_data_din = grp_xFLKOpticalFlowDenseKernel_unsigned_short_1080_unsigned_short_1920_5_50_11_16_10_false_s_fu_98_streamFlowout_mat_437_din;

assign trunc_ln100_fu_124_p1 = scale_up_flag_dout[7:0];

assign trunc_ln304_fu_128_p1 = init_flag_dout[0:0];

endmodule //pyr_dense_optical_flow_accel_densePyrOpticalFlow_5_50_11_16_10_0_1080_1920_1_false_s
